<!DOCTYPE html>
<html>
    <head>
        <meta name="description" content="">
        <meta name='viewport' content='width=device-width, initial-scale=1'>
        <link rel="icon" href="data:,">
        <script src="jquery.js"></script>
    </head>
    <body>

      <div class=app> 
        <div style="color:blue"> 
        Sleep Time 
        <table>
        <tr>
        <th style="border:1px solid black">Sleep Time</th>
        </tr>
        <tr>
        <th>
        <th class="time">1</th>
        <th class="time">2</th>
        <th class="time">3</th>
        <th class="time">4</th>
        <th class="time">5</th>
        <th class="time">6</th>
        
        </tr>
        <th style="border:1px solid black">Number of Awakenings</th>
        </tr>
        <tr>
        </th>
        <tr>
        <th>
        <!--input style="border:1px solid black" id="sleeptime" type = "number" class=sleep_time></input-->
        <input type = "text" id="sleeptime" style="border:1px solid black" class=sleep_time></input>
        </th>
        </tr>

        </table>
        <!--<button onclick="submit()">Submit</button>-->
        <button id=submit_1>Submit</button>

        </div>
      
      </div>

      <style>
      .app{
      background-color:gray;
      width:100%;
      height:100%;
      }
      .time{
      border:1px solid black;
      }



      </style>
      <script>

      function submit(){
      var sleeptime=document.getElementById("sleeptime").value;
      alert(sleeptime);
        

      //console.log('done')
      //fs.writeFile("test.txt",sleeptime);

      }


  var download_txt=function(fn,txt){
    //-----------------------
    var bytes = [];
        bytes.push(239);
        bytes.push(187);
        bytes.push(191);
    for (var i = 0; i < txt.length; i++) {
        if(txt.charCodeAt(i)<128) {
            bytes.push(txt.charCodeAt(i));
        }
        else if(txt.charCodeAt(i)<2048) {
            bytes.push(( (txt.charCodeAt(i) & 192) >> 6 ) + ((txt.charCodeAt(i) & 1792)>>6 ) +192); //xC0>>6 + x700>>8 +xE0
            bytes.push(txt.charCodeAt(i) & 63 + 128); //x3F + x80
        }
        else if(txt.charCodeAt(i)<65536) {
            bytes.push(((txt.charCodeAt(i) & 61440) >>12) + 224 ); //xF00>>12 + xE0
            bytes.push(( (txt.charCodeAt(i) & 192) >> 6 ) + ((txt.charCodeAt(i) & 3840)>>6 ) +128); //xC0>>6 + xF00>>8 +x80
            bytes.push(txt.charCodeAt(i) & 63 + 128); //x3F + x80
        }
    }
    var u8 = new Uint8Array(bytes);
    var blob = new Blob([u8]);
    //-----------------------
    if (navigator.appVersion.toString().indexOf('.NET') > 0){
        window.navigator.msSaveBlob(blob, fn);
    }
    else{
        var link = document.createElement("a");
        link.setAttribute("href", window.URL.createObjectURL(blob));
        link.setAttribute("download", fn);
        link.style = "visibility:hidden";
        link.download = fn;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
  }
  //---------------------------------------------



      $('#submit_1').on('click',function(){
        alert(1)
        var new_txt="Sleep time =" + $('#sleeptime').val();
        var txt=localStorage.getItem("Sleep");
        txt+="\r\n"+new_txt;
        
        localStorage.setItem("Sleep",txt);
        download_txt("test.txt",txt);
      })

      </script>
    </body>
</html>